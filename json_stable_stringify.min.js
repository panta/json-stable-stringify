!function(a,b){"function"==typeof define&&define.amd?define(b):"object"==typeof exports?module.exports=b():a.JSON_stable_stringify=b()}(this,function(){function a(a,d){d||(d={}),"function"==typeof d&&(d={cmp:d});var e=d.space||"";"number"==typeof e&&(e=Array(e+1).join(" "));var f="boolean"==typeof d.cycles?d.cycles:!1,g=d.replacer||function(a,b){return b},h=d.stringify||JSON.stringify,i=d.cmp&&function(a){return function(b){return function(c,d){var e={key:c,value:b[c]},f={key:d,value:b[d]};return a(e,f)}}}(d.cmp),j=[];return function k(a,d,l,m){var n=e?"\n"+new Array(m+1).join(e):"",o=e?": ":":";if(l&&l.toJSON&&"function"==typeof l.toJSON&&(l=l.toJSON()),l=g.call(a,d,l),void 0!==l){if("object"!=typeof l||null===l)return h(l);if(b(l)){for(var p=[],q=0;q<l.length;q++){var r=k(l,q,l[q],m+1)||h(null);p.push(n+e+r)}return"["+p.join(",")+n+"]"}if(-1!==j.indexOf(l)){if(f)return h("__cycle__");throw new TypeError("Converting circular structure to JSON")}j.push(l);for(var s=c(l).sort(i&&i(l)),p=[],q=0;q<s.length;q++){var d=s[q],t=k(l,d,l[d],m+1);if(t){var u=h(d)+o+t;p.push(n+e+u)}}return"{"+p.join(",")+n+"}"}}({"":a},"",a,0)}var b=("undefined"!=typeof JSON?JSON:require("jsonify"),Array.isArray||function(a){return"[object Array]"==={}.toString.call(a)}),c=Object.keys||function(a){var b=Object.prototype.hasOwnProperty||function(){return!0},c=[];for(var d in a)b.call(a,d)&&c.push(d);return c};return a});